{{extend 'page_layout.html'}}
{{#=BEAUTIFY(response._vars)}}
<!-- clock
<link rel="stylesheet" href="{{=URL('static','css/flipclock.css')}}"> {{#http://goo.gl/oYyk49}}
<script src="{{=URL('static','js/flipclock.min.js')}}"></script>

<div class="clock"></div>
<script type="text/javascript">
	var clock = $('.clock').FlipClock({{=auction_request_info['ends_in_seconds']}}, {
		clockFace: 'DailyCounter',
		countdown: true
	});
</script>
-->
<div class="panel panel-info">
	<div class= "panel-heading text-uppercase text-md">
		Auction for <strong>{{=auction_request_info['year']}} {{=auction_request_info['make']}} {{=auction_request_info['model']}}</strong>
		
		<span class="pull-right text-xs text-light"> Auction ID: {{=auction_request_info['id']}}</span>
	</div>

	<div class="panel-body">
		<div class="row">
			<div class="col-xs-6">
				<table class="table table-hover text-sm">
					<tr>
						<th style="border-top: none">
							Name
						</th>

						<td style="border-top: none">
							{{=auction_request_info['first_name']}} {{=auction_request_info['last_init']}}
						</td>
					</tr>

					<tr>
						<th>
							Location
						</th>

						<td>
							{{=auction_request_info['city']}}, {{=auction_request_info['state']}} {{=auction_request_info['zip_code']}}
						</td>
					</tr>

					<tr>
						<th>
							Auction Info
						</th>

						<td>
							<div>
								<strong style="width: 40px; display:inline-block">Car:</strong> {{=auction_request_info['year']}} {{=auction_request_info['make'].upper()}} {{=auction_request_info['model'].upper()}}
							</div>

							<div>
								<strong style="width: 40px; display:inline-block">Trim:</strong> {{=auction_request_info['trim_name']}}
							</div>
						</td>
					</tr>

					<tr>
						<th>
							Colors
						</th>
						<td>
							{{for each_color in auction_request_info['colors']:}}
								<div><i class="fa fa-square" style="color:#{{=each_color[1]}}; text-shadow : -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black; padding-right:4px;" title="{{=each_color[0]}}"></i> {{=each_color[0]}}</div>
							{{pass}}
						</td>
					</tr>
				</table>
			</div>
			<div class="col-xs-6">
				<table class="table table-hover text-sm">
					<tr>
						<th style="border-top: none">
							No. Dealers:
						</th>

						<td style="border-top: none">
							{{=auction_request_info['number_of_dealers']}}
						</td>
					</tr>

					<tr>
						<th>
							No. bids:
						</th>

						<td>
							{{=auction_request_info['number_of_bids']}}
						</td>
					</tr>

					<tr>
						<th>
							Lowest bid:
						</th>

						<td>
							{{=auction_request_info['best_price']}}
						</td>
					</tr>

					<tr>
						<th>
							Favorite price:
						</th>

						<td>
							$ 00,000
						</td>
					</tr>

					<tr>
						<td>
							<strong style="display: block">Stock photo:</strong>
							<img src="http://placehold.it/400x400" class="img-responsive" style="max-width: 150px">
						</td>
						<td>
							<strong style="display: block">Favorite photo:</strong>
							<img src="http://placehold.it/400x400" class="img-responsive" style="max-width: 150px">						
						</td>
					</tr>
				</table>


			</div>
		</div>
	</div>
</div>

	<!--
		{{for each_offer in auction_request_offers_info:}}
			{{=each_offer['id']}}
			{{=each_offer['last_bid_price']}}
			{{=each_offer['number_of_bids']}}
			{{=each_offer['msrp']}}
			{{=each_offer['msrp_discount_percent']}} 
			{{=each_offer['color']}}
			{{=each_offer['summary']}}
			{{=each_offer['interior_options']}}
			{{=each_offer['exterior_options']}}
			{{=each_offer['mechanical_options']}}
			{{=each_offer['package_options']}}
			{{=each_offer['fees_options']}}

			{{#=each_offer['exterior_image']}}
			{{#=each_offer['interior_image']}}
			{{#=each_offer['front_image']}}
			{{#=each_offer['rear_image']}}
			{{#=each_offer['tire_image']}}
			{{#=each_offer['dashboard_image']}}
			{{#=each_offer['passenger_image']}}
			{{#=each_offer['trunk_image']}}
			{{#=each_offer['underhood_image']}}
			{{#=each_offer['roof_image']}}
			{{#=each_offer['other_image']}}

		{{pass}}	
	-->

{{for counter, each_offer in enumerate(auction_request_offers_info):}}
	<div class="panel panel-default">
		<div class="panel-heading">
			<span><strong>{{=each_offer['last_bid_price'] or 'Awaiting'}} bid</strong> from {{=each_offer['dealer_first_name'].capitalize()}} in <strong>Astoria, NY</strong></span>

			<span class="pull-right">
				<button class="btn btn-default btn-xs"><i class="fa fa-heart"></i></button>
				<button id="expand_offer{{=counter}}" class="btn btn-default btn-xs" rel="tooltip" title="Expand Bid" data-toggle="collapse" data-target="#expand_{{each_offer['id']}}"><i class="fa fa-plus"></i></button>
			</span>

			{{"""}}<span class="text-center text-sm text-light text-uppercase margin-right-10"> Bid ID: {{=each_offer['id']}} | Dealer ID: 00</span>{{"""}}
		</div>
		<div class="panel-body">
			<div class="col-xs-4">
				<div id="images_{{=each_offer['id']}}" class="carousel slide" data-ride="carousel">

				  	<!-- IMAGE SLIDER -->
				  	<div class="carousel-inner">

				    	<div class="item active">
							{{exterior_image_s = each_offer['exterior_images'][0]}}
				     		<img src="{{=URL('static', 'thumbnails/%s'%exterior_image_s)}}" alt="{{=exterior_image_s}}" class="img-responsive">
				    	</div>

						<div class="item">
							{{interior_image_s = each_offer['interior_images'][0]}}
							<img src="{{=URL('static', 'thumbnails/%s'%interior_image_s)}}" alt="{{=interior_image_s}}" class="img-responsive">
						</div>
						
						{{if each_offer['front_images']:}} {{# from here it may be possible dealer did not submit these images}}
							{{front_image_s=each_offer['front_images'][0]}}
							<div class="item">
								<img src="{{=URL('static', 'thumbnails/%s'%front_image_s)}}" alt="{{=front_image_s}}" class="img-responsive">
							</div>
						{{pass}}

						{{if each_offer['rear_images']:}}
							{{rear_image_s=each_offer['rear_images'][0]}}
							<div class="item">
								<img src="{{=URL('static', 'thumbnails/%s'%rear_image_s)}}" alt="{{=rear_image_s}}" class="img-responsive">
							</div>
						{{pass}}

						{{if each_offer['tire_images']:}}
							{{tire_image_s = each_offer['tire_images'][0]}}
							<div class="item">
								<img src="{{=URL('static', 'thumbnails/%s'%tire_image_s)}}" alt="{{=tire_image_s}}" class="img-responsive">
							</div>
						{{pass}}

						{{if each_offer['dashboard_images']:}}
							{{dashboard_image_s = each_offer['dashboard_images'][0]}}
							<div class="item">
								<img src="{{=URL('static', 'thumbnails/%s'%dashboard_image_s)}}" alt="{{=dashboard_image_s}}" class="img-responsive">
							</div>
						{{pass}}
						
						{{if each_offer['passenger_images']:}}
							{{passenger_image_s = each_offer['passenger_images'][0]}}
							<div class="item">
								<img src="{{=URL('static', 'thumbnails/%s'%passenger_image_s)}}" alt="{{=passenger_image_s}}" class="img-responsive">
							</div>
						{{pass}}

						{{if each_offer['trunk_images']:}}
							{{trunk_image_s = each_offer['trunk_images'][0]}}
							<div class="item">
								<img src="{{=URL('static', 'thumbnails/%s'%trunk_image_s)}}" alt="{{=trunk_image_s}}" class="img-responsive">
							</div>
						{{pass}}

						{{if each_offer['underhood_images']:}}
							{{underhood_image_s = each_offer['underhood_images'][0]}}
							<div class="item">
								<img src="{{=URL('static', 'thumbnails/%s'%underhood_image_s)}}" alt="{{=underhood_image_s}}" class="img-responsive">
							</div>
						{{pass}}

						{{if each_offer['roof_images']:}}
							{{roof_image_s = each_offer['roof_images'][0]}}
							<div class="item">
								<img src="{{=URL('static', 'thumbnails/%s'%roof_image_s)}}" alt="{{=roof_image_s}}" class="img-responsive">
							</div>
						{{pass}}

						{{if each_offer['other_images']:}}
							{{other_image_s = each_offer['other_images'][0]}}
							<div class="item">
								<img src="{{=URL('static', 'thumbnails/%s'%other_image_s)}}" alt="{{=other_image_s}}" class="img-responsive">
							</div>
						{{pass}}
				
				  	</div>

				  	<!-- Controls -->
				  	<a class="left carousel-control" href="#images_{{=each_offer['id']}}" data-slide="prev">
				    	<span class="glyphicon glyphicon-chevron-left"></span>
				  	</a>
				  	<a class="right carousel-control" href="#images_{{=each_offer['id']}}" data-slide="next">
				    	<span class="glyphicon glyphicon-chevron-right"></span>
					</a>
				</div>			
			</div>
			
			<div class="col-xs-4">
				<div class="row">
					<div class="col-xs-4 text-bold">
						MSRP:
					</div>
					<div class="col-xs-8">
						{{=each_offer['msrp']}}
					</div>	

					<div class="col-xs-4 text-bold">
						Savings:
					</div>
					<div class="col-xs-8">
						{{=each_offer['msrp_discount_dollars']}} <span class="text-sm text-light">{{=each_offer['msrp_discount_percent']}} off</span>
					</div>

					<div class="col-xs-4 text-bold">
						Distance:
					</div>
					<div class="col-xs-8">
						{{=each_offer['offer_distance_to_auction_request']}} miles away
					</div>

					<div class="col-xs-4 text-bold">
						Color:
					</div>

					<div class="col-xs-8">
						{{=each_offer['color']}}
					</div>
					
					<div class="col-xs-4 text-bold">
						Bids:
					</div>

					<div class="col-xs-8">
						{{=each_offer['number_of_bids']}}
					</div>
					
					<div class="col-xs-4 text-bold">
						Dealer ID:
					</div>

					<div class="col-xs-8">
						{{=each_offer['dealer_id']}}
					</div>

					<div class="col-xs-4 text-bold">
						Rating:
					</div>

					<div class="col-xs-8">
						<i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i>
					</div>

				</div>
			</div>

			<div class="col-xs-4">
				<div class="text-bold">Description:</div>
				<div>{{truncate=234}}{{=each_offer['summary'][:truncate]}}<span id="dotdotdot{{=counter}}">...</span><span id="untruncate{{=counter}}">{{=each_offer['summary'][truncate:]}}</span></div>
				<script>
					$("#untruncate{{=counter}}").hide();
				</script>
			</div>
			<div class="col-xs-12 collapse text-sm" id="expand_{{each_offer['id']}}">

				<hr>
				<!-- Nav tabs -->
				<ul class="nav nav-tabs nav-justified ">
					<li class="active"><a href="#dd_{{=each_offer['id']}}" data-toggle="tab">Options</a></li>
					<li><a href="#ques_{{each_offer['id']}}" data-toggle="tab">Question</a></li>
				</ul>

				<!-- Tab panes -->
				<div class="tab-content">
					<div class="tab-pane active" id="dd_{{=each_offer['id']}}">
						
						<div class="col-xs-3">
							<div class="text-bold">
								Exterior:
							</div>
							<ul>
							{{for each_option in each_offer['exterior_options']:}}
								<li>{{=each_option['name']}}
							{{pass}}
							</ul>
						</div>

						<div class="col-xs-3">
							<div class="text-bold">
								Interior:
							</div>
							<ul>
							{{for each_option in each_offer['interior_options']:}}
								<li>{{=each_option['name']}}
							{{pass}}
							</ul>
						</div>

						<div class="col-xs-3">
							<div class="text-bold">
								Mechanical:
							</div>
							<ul>
							{{for each_option in each_offer['mechanical_options']:}}
								<li>{{=each_option['name']}}
							{{pass}}
							</ul>
						</div>

						<div class="col-xs-3">
							<div class="text-bold">
								Package:
							</div>
							<ul>
							{{for each_option in each_offer['package_options']:}}
								<li>{{=each_option['name']}}
							{{pass}}
							</ul>
						</div>

						<div class="clearfix"></div>

					</div>
					<div class="tab-pane" id="ques_{{each_offer['id']}}">
						<form role="form" class="row margin-top-10">
							<div class="col-xs-6">
								<div>Ask the {{if is_dealer:}}buyer{{elif is_owner:}}dealer{{pass}} a question:</div>
								<textarea class="form-control"></textarea>
							</div>
						</form>

					</div>
					
				</div>
			</div>
		</div>
	</div>
	<script>
		$("#expand_offer{{=counter}}").click(function(){
			$("#dotdotdot{{=counter}}").toggle();
			$("#untruncate{{=counter}}").toggle();
			//$(this).hide();
			//$("#expand_offer_btn{{=counter}}
		});
	</script>
{{pass}}

 
<!--{{=auction_request_info['id']}}
{{=auction_request_info['year']}}
{{=auction_request_info['make']}}
{{=auction_request_info['model']}}
{{=auction_request_info['trim_name']}}
{{#=auction_request_info['trim_data']}}
{{=auction_request_info['colors']}}
{{=auction_request_info['city']}}
{{=auction_request_info['state']}}-->
{{#=auction_request_info['ends_on']}}
{{#=auction_request_info['ends_in_seconds']}}
{{#=auction_request_info['ends_in_human']}}
<!--{{=auction_request_info['number_of_bids']}}
{{=auction_request_info['best_price']}}-->


<!--
<ul class="nav nav-list">
  <li class="divider"></li>
</ul>
 
<div class= "row-fluid">
	<div class="span2">
		<div class="btn-group">
			<a id="make_dropdown" class="btn btn-large dropdown-toggle" data-toggle="dropdown" href="#">
				{{sortby = request.vars['sortby']}}
				{{=sortby.capitalize() if sortby else "Sort bids"}}
				<span class="caret"></span>
			</a>
			<ul class="dropdown-menu">
				<!-- dropdown menu links 
					{{for each in sortlist:}}<li><a id = "{{=each+'_sorter'}}" href="{{=URL(args=request.args, vars=dict(sortby=each))}}">{{=each.replace('-',' ').capitalize()}}</a></li>{{pass}}
			</ul>
		</div>
	</div>
</div>
 


{{if bid_form:}}{{=bid_form}}{{pass}}-->