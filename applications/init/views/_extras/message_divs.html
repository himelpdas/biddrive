{{def message_divs():}} <!--{{#cannot use conditional includes, so use view functions instead so the below can be used in multiple site points}}-->

	<div id="ajax_failure_warning_message_container"></div>
	{{if response.message:}}{{response.flash=None}}{{pass}} <!--{{#message usually has better details than flash generated by web2py, so show only one}}-->
	{{alert_headers = [response.flash, session.flash, response.message, response.message2, response.message3, session.message, session.message2]}}
	{{alert_headers.reverse()}} <!--{{#so they show up in proper order}}-->
	{{alertIndex = 0}}
	{{for each in alert_headers:}}
		{{if each:}}
			{{id="alert{}".format(alertIndex)}}
			{{alertIndex += 1}}
			{{if each[:1] == "$":}} {{#if first letter dollar sign then activate success div}}
				<div id="{{=id}}" class="alert_headers alert alert-success">{{=XML(each[1:])}} <!--{{# "$" use for good news}}-->
			{{elif each[:1] == "!":}}
				<div id="{{=id}}" class="alert_headers alert alert-warning">{{=XML(each[1:])}} <!--{{# "!" use for important news}}-->
			{{elif each[:1] == "@":}}
				<div id="{{=id}}" class="alert_headers alert alert-danger">{{=XML(each[1:])}} <!--{{# "@" use for errors and dangerous news}}-->
			{{else:}}
				<div id="{{=id}}" class="alert_headers alert alert-info" style="position:relative;top:0px;">{{=XML(each)}} <!-- {{# "&" use for informing}}-->
			{{pass}}
					<i class="fa fa-times-circle-o pull-right" onclick="$('#{{=id}}').hide()"></i>
				</div>
		{{pass}}
	{{pass}}
	{{response.flash = session.flash = response.message = response.message2 = response.message3 = session.message = session.message2 = None}} <!--{{# http://goo.gl/7t2HKR must put session.flash in a different variable in controller because response.flash overrides it}}-->

	<script>
		$('.alert_headers')
		.css({'padding':'10px','border-radius':'25px',
			{{if IS_HOMEPAGE:}}
				{{_opacity = 0.8}}
				'position':'fixed', 'z-index':9999, 'top':'75px', 'right':'10px',
			{{else:}}
				{{_opacity = 1.0}}
			{{pass}}
			'opacity':{{=_opacity}},
		})
		.hide()
		.fadeIn(250)
		.hover(
			function(){
				$(this).css({'opacity':'0.6'});
			},
			function(){
				$(this).css({ 'opacity':{{=_opacity}} });
			}
		)
		.click(function(){
			$(this).fadeOut();
		});
	</script>

{{return}}