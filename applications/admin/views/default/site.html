{{extend 'layout.html'}}
{{import os, glob}}

<table padding="5px"><tr><td width="60%">
<div class="main_panel box">
<h3>{{=T("Installed applications")}}</h3>
{{for a in apps:}} 
<div class="application">
{{if a==request.application:}}
<h4><img src="{{=URL('static','folder_current.gif')}}"/>{{=a}}</h2>  
{{else:}}
<h4><img src="{{=URL('static','folder.gif')}}"/><a href="{{=URL(a,'default','index')}}">{{=a}}</a></h2> 
{{if not os.path.exists('applications/%s/compiled' % a):}}
<a class="button editbutton" href="{{=URL('design',args=a)}}">{{=T("edit")}}</a>
{{else:}}
<a class="button" href="{{=URL(a,'appadmin','index')}}">{{=T("appadmin")}}</a>
{{pass}}
<a class="button" href="{{=URL('about',args=a)}}">{{=T("about")}}</a>
{{pass}}
<a class="button" href="{{=URL('errors',args=a)}}">{{=T("errors")}}</a>
<a class="button" href="{{=URL('cleanup',args=a)}}">{{=T("clean")}}</a>
<a class="button" href="{{=URL('pack',args=a)}}">{{=T("pack all")}}</a>
{{if not os.path.exists('applications/%s/compiled' % a):}}
<a class="button" href="{{=URL('compile_app',args=a)}}">{{=T("compile")}}</a>
{{else:}}
<a class="button" href="{{=URL('pack',args=(a, 'compiled'))}}">{{=T("pack compiled")}}</a> 
{{if glob.glob('applications/%s/controllers/*.py' % a):}}
<a class="button" href="{{=URL('remove_compiled_app',args=a)}}">{{=T("remove compiled")}}</a> 
{{pass}}
{{pass}}
{{if a!=request.application:}}
<a class="button" href="{{=URL('uninstall',args=a)}}">{{=T("uninstall")}}</a> 
{{pass}}
<br/>
</div>
{{pass}}
<br/>
</div>

</td><td align="right">
<div class="box pwbox">
<a class="button" href="{{=URL('change_password')}}">{{=T('change admin password')}}</a>
</div>
<br/>
<div class="box">
<h3>{{=T('web2py Version')}}</h3>
<strong id="vernum">{{=myversion}}</strong><br />
{{if session.check_version:}}
<div id="check_version">
{{=T('Checking for upgrades...')}}
</div>
<script>ajax('{{=URL('check_version')}}',[],'check_version');</script>{{session.check_version=False}}
{{else:}}
<div id="check_version">
{{=A(T('click to check for upgrades'),_class="button",_href="javascript:ajax('"+URL('check_version')+"',[],'check_version')")}}
</div>
{{pass}}
<a class="button" href="{{=URL('upgrade_web2py')}}">{{=T('upgrade web2py now')}}</a>
</div><br/>

<div class="box">
<h3>{{=T("New application wizard")}}</h3>
<a class="button" href="{{=URL('wizard','index')}}">{{=T('start wizard')}}</a>
<strong>requires network</strong>
</div><br/>

<div class="box">
<h3>{{=T("New simple application")}}</h3>
<form action="" enctype="multipart/form-data" method="post">{{=T("Application name:")}} <input name="filename" type="text" /> <button type="submit">{{=T('create')}}</button> <div class="hidden"></div></form>
</div><br/>


<div class="box">
<h3>{{=T("Upload & install packed application")}}</h3>
<form action="" enctype="multipart/form-data" method="post">
<div class="subbox">
<h4>{{=T("Upload a package")}}</h4>
<label for="file">File:</label> <input id="file" name="file" type="file" />
</div>
<div class="subbox">
<h4>{{=T("or provide app url:")}}</h4>
<label for="appurl">URL:</label> <input id="appurl" name="appurl" type="text" /><br />
<label for="url_filename">{{=T("Rename (required):")}}</label> <input id="url_filename" name="filename" type="text" />
</div>
<div class="subbox">
<input type="checkbox" name="overwrite_check"}}/> {{=T("overwrite installed app")}}
</div>
<button type="submit">{{=T('install')}}</button>
<div class="hidden"></div></form>




</div><br/>

<div class="box">
<h3>{{=T("Deploy on Google App Engine")}}</h3>
<a class="button" href="{{=URL(request.application,'gae','deploy')}}">deploy</a>
</div><br/>

<div class="box">
<h3>{{=T("web2py Recent Tweets")}}</h3>
<div id="tweets">{{=T('loading...')}}</div>
<script>
  jQuery(document).ready(function(){jQuery('#tweets').load('{{=URL('twitter')}}')});
</script>
</div><br/>
</td></tr></table>
